{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to CraftD","text":""},{"location":"#features","title":"Features","text":""},{"location":"#compatibility","title":"\ud83d\udd17 Compatibility","text":"Tech Support View System - Android \u2705 Supported Jetpack Compose - Android \u2705 Supported Widgets Flutter \u2705 Supported SwiftUI - iOS \u2705 Supported Compose Multiplatform \u2705 Supported"},{"location":"#components-that-already-exist-in-the-library","title":"Components that already exist in the library","text":"Component Jetpack Compose / CMP Android View Flutter SwiftUI Button X X X - Text X X X X Checkbox X - - -"},{"location":"#backend-structure-expected-by-craftd","title":"Backend structure expected by CraftD","text":"<p>To render components dynamically, CraftD expects your backend to return a JSON array where:</p> <ul> <li><code>key</code> is the identifier of the component you want to render (ex: <code>CraftDTextView</code>, <code>CraftDButton</code>).</li> <li><code>value</code> represents the structure and properties of that component.</li> <li>Each platform (Compose, View System, Flutter, SwiftUI) interprets these properties according to its own specification.</li> </ul>"},{"location":"#example-of-expected-structure","title":"Example of expected structure","text":"<pre><code>[\n  {\n    \"key\": \"CraftDTextView\",\n    \"value\": {\n      \"text\": \"Knife\",\n      \"backgroundHex\" : \"#9A71F6\",\n      \"textSize\": \"30\",\n      \"textColorHex\": \"#000000\"\n    }\n  },\n  {\n    \"key\": \"CraftDButton\",\n    \"value\": {\n      \"text\": \"Some Action :)\",\n      \"align\": \"RIGHT\",\n      \"textAlign\": \"CENTER\",\n      \"textAllCaps\": true,\n      \"textSize\": \"20\",\n      \"textColorHex\": \"#FFFFFF\",\n      \"backgroundHex\": \"#2fa003\",\n      \"actionProperties\": {\n        \"deeplink\": \"CraftDview://any\",\n        \"analytics\": {\n          \"category\": \"hello\",\n          \"action\": \"world\",\n          \"label\": \"everywhere\"\n        }\n      }\n    }\n  }\n]\n</code></pre>"},{"location":"#how-to-extend","title":"How to extend","text":"<p>Each component type has its own platform-specific specification for how it is built or rendered, but all of them use the same JSON structure. To understand all available properties, check the documentation for:</p> <ul> <li>Compose</li> <li>Android View System</li> <li>Flutter</li> <li>SwiftUI</li> </ul>"},{"location":"#screen-recordings","title":"Screen recordings","text":"JetPack Compose / CMP View System Android Flutter Swift UI <p>Credits</p> <p>A Server Driven UI library for Android. Inspired by the DynamicView.</p>"},{"location":"contributors/","title":"Contributors","text":"<p>We would like to thank everyone who made this possible and helped &gt; the CodandoTV community grow stronger. This project exists thanks &gt; to all the people who contribute</p> <p>Signed by Rods</p> <p>This project exists thanks to all the people who contribute.</p> <p></p>"},{"location":"setup/","title":"Setup","text":""},{"location":"setup/#android-cmp","title":"Android / CMP","text":"<ul> <li>Add in your settings.gradle mavenCetral:</li> </ul> <pre><code>dependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        //Stuff\n        mavenCentral()\n    }\n}\n</code></pre> <ul> <li>There are three versions for Android</li> </ul> <p>Jetpack Compose</p> <pre><code>implementation(\"io.github.codandotv:craftd-compose:${last_version}\")\n</code></pre> <p>XML View System</p> <pre><code>implementation(\"io.github.codandotv:craftd-xml:${last_version}\")\n</code></pre> <p>Core</p> <p>Core - Is meant to be used for you to customize even the craftD mechanism</p> <pre><code>```kotlin\nimplementation(\"io.github.codandotv:craftd-core:${last_version}\")\n```\n</code></pre>"},{"location":"setup/#ios","title":"iOS","text":"<ul> <li>Add your pod \u2018CraftDSwiftUI\u2019</li> </ul> <p>In Progress</p> <p>This section is in progress\u2026</p>"},{"location":"setup/#flutter","title":"Flutter","text":"<ul> <li>Run this command with Flutter:</li> </ul> <pre><code>flutter pub add craftd_widget\n</code></pre> <p>This will add a line like this to your package\u2019s pubspec.yaml (and run an implicit flutter pub get):</p> <p>pubspec.yml</p> <pre><code>dependencies:\n    craftd_widget: $last_version\n</code></pre>"},{"location":"how-to-use/compose/","title":"Jetpack Compose / CMP","text":"<ul> <li>Create your <code>ComponentPropertyClass</code> with all the properties your component needs.   In this example, we\u2019re using a checkbox component.</li> </ul> <p>Immutable and Stable annotations</p> <p>To avoid unnecessary recompositions in your component, we recommend using the <code>@Immutable</code> and <code>@Stable</code> annotations in your properties.</p>"},{"location":"how-to-use/compose/#1-enable-kotlin-serialization","title":"1. Enable Kotlin Serialization","text":"<p>In your root build.gradle.kts, add the Kotlin serialization plugin (version 2.2.21 or higher):</p> <pre><code>id(\"org.jetbrains.kotlin.plugin.serialization\") version \"2.2.21\"\n</code></pre> <p>In your module  build.gradle.kts add</p> <pre><code>   implementation(libs.kotlinx.serialization.json)\n</code></pre> <ol> <li>Create your owner object that has the same field in your json like: (This class must match the structure of the JSON that will be parsed:)</li> </ol> <pre><code>@Stable\n@Immutable\n@Serializable\ndata class CheckBoxProperties(\n    @SerialName(\"text\") val text: String? = null,\n    ... define your properties here\n)\n</code></pre> <p>Note</p> <p>You can use your component object in dynamic.json inside the sample project app-sample-android or KMP-sample:</p> <pre><code>{\n  \"key\": \"CraftDCheckBox\",\n  \"value\": {\n    ... define your properties here\n  }\n}\n</code></pre> <ul> <li>Create your Component</li> </ul> <p>Your component must have three properties</p> <ul> <li>componentProperties: The mapped properties from json</li> <li>modifier: Default for composable componets</li> <li>behaviour: This make reference to the component\u2019s behaviour, for example: onclick -&gt; for buttons, onchange -&gt; for checkbox etc\u2026</li> </ul> <pre><code>class CraftDCheckBoxBuilder(\n    override val key: String = CraftDComponentKey.CHECK_BOX_COMPONENT.key\n) :\n    CraftDBuilder {\n    @Composable\n    override fun craft(model: SimpleProperties, listener: CraftDViewListener) {\n        val checkBoxProperties = model.value.convertToVO&lt;CheckBoxProperties&gt;()\n        CraftDCheckBox(checkBoxProperties) {\n            checkBoxProperties.actionProperties?.let { listener.invoke(it) }\n        }\n    }\n}\n</code></pre> <ul> <li>Create your Component Builder:</li> </ul> <p>Note</p> <p>This Builder must extend CraftBuilder Class and override craft method.</p> <pre><code>class CraftDCheckBoxBuilder(\n    override val key: String = CraftDComponentKey.CHECK_BOX_COMPONENT.key\n) :\n    CraftDBuilder {\n    @Composable\n    override fun craft(model: SimpleProperties, listener: CraftDViewListener) {\n        val checkBoxProperties = model.value.convertToVO&lt;CheckBoxProperties&gt;()\n        CraftDCheckBox(checkBoxProperties) {\n            checkBoxProperties.actionProperties?.let { listener.invoke(it) }\n        }\n    }\n}\n</code></pre> <ul> <li>In your screen you can add the builder inside of <code>CraftBuilderManager</code></li> </ul> <pre><code>@Composable\nfun InitialScreen(\n    vm: SampleCraftDComposeViewModel\n) {\n    val properties by vm.properties.collectAsStateWithLifecycle()\n    val dynamicBuilder = remember {\n        CraftDBuilderManager().add(\n            CraftDCheckBoxBuilder()\n        )\n    }\n    LaunchedEffect(Unit) {\n        vm.loadProperties()\n    }\n\n    CraftDynamic(\n        properties = properties,\n        dynamicBuilder = dynamicBuilder\n    ) {\n        //Component click return to do something\n    }\n}\n</code></pre> <p>So now enjoy your component!</p>"},{"location":"how-to-use/futter/","title":"Flutter","text":"<ul> <li>Create your ComponentPropertyClass with properties that you need</li> </ul> <pre><code>class ButtonProperties {\n  const ButtonProperties({\n      required this.text,\n    ... place your construtor properties\n  });\n\n  final String text;\n   ... place your properties\n}\n</code></pre> <ul> <li>Add your Component json object in <code>Dymanic.json</code></li> </ul> <pre><code>{\n    \"key\": \"CraftDBbutton\",\n    \"value\": {\n         \"text\": \"Knife\",\n     ... place your properties\n     }\n }\n</code></pre> <ul> <li>Create your Component</li> </ul> <p>Your component must have three properties</p> <ul> <li>ButtonProperties: The mapped properties from json</li> <li>callback: This make reference to the component\u2019s behaviour, for example: onclick -&gt; for buttons, onchange -&gt; for checkbox etc\u2026</li> </ul> <pre><code>class CraftDButton extends StatelessWidget {\n   const CraftDButton(\n      {super.key, required this.buttonProperties, required this.callback}\n   );\n\n  //... place your code\n}\n</code></pre> <ul> <li>Create your Component Builder</li> </ul> <p>This Builder must extend <code>CraftBuilder</code> Class and override craft and fromJson methods.</p> <pre><code>class CraftDButtonBuilder extends CraftDBuilder&lt;ButtonProperties&gt; {\n    CraftDButtonBuilder() : super(key: key);\n\n    @override\n    Widget craft(ButtonProperties model, CraftDViewListener listener) {\n        //... place your code\n    }\n\n    @override\n    ButtonProperties fromJson(properties) {\n        return ButtonProperties(\n            text: properties[\"text\"],\n            //... rest of tour code\n        )\n    }\n\n    static String key = \"CraftDButton\";\n}\n</code></pre> <ul> <li>In your Page, create your <code>CraftDBuilder</code> declaration and put it into <code>CraftDynamic</code> Widget</li> </ul> <pre><code>    // You can put it in your dependency injection\n    final craftdBuilderManager = CraftDBuilderManager();\n\n    return CraftDynamic(\n         simplePropertiesList: simplePropertiesList,\n         craftDBuilderManager : craftdBuilderManager,\n         onAction: (actionProperties) {\n            print(\n                \"categoria ${actionProperties.analyticsProperties?.category} \"\n                \"label ${actionProperties.analyticsProperties?.label} - \"\n                \"track ${actionProperties.analyticsProperties?.track}\");\n            });\n          }\n</code></pre>"},{"location":"how-to-use/swift-ui/","title":"Swift UI","text":"<ul> <li>Create your ComponentPropertyClass with properties that you need</li> </ul> <pre><code>public struct TextProperties: Decodable {\n    public let text: String?\n    public let textColorHex: String?\n    public let textSize: String?\n    public let backgroundHex: String?\n    public let textAllCaps: Bool?\n    public let textHtml: String?\n}\n</code></pre> <ul> <li>Add your Component json object in `Dymanic.json``</li> </ul> <pre><code>[\n  {\n    \"key\": \"MyCraftDText\",\n    \"value\": {\n      \"text\": \"Knife\",\n      \"backgroundHex\": \"#9A71F6\",\n      \"textSize\": \"30\",\n      \"textColorHex\": \"#000000\"\n    }\n  }\n]\n</code></pre> <ul> <li>Create your Component</li> </ul> <p>This Builder must extend <code>CraftBuilder</code> Class and override craft method.</p> <pre><code>public class MyCraftDTextBuilder: CraftDBuilder {\n    public let key = \"MyCraftDText\"\n\n    let decoder = JSONDecoder()\n\n    public func craft(\n        model: SimpleProperties,\n        listener: CraftDViewListener\n    ) -&gt; any View {\n        do {\n            let properties = try model.decodeValue(TextProperties.self, using: decoder)\n            return Text(properties.text ?? \"\")\n        } catch {\n            return EmptyView()\n        }\n    }\n}\n</code></pre> <ul> <li>In your add your builder inside of <code>CraftBuilderManager</code></li> </ul> <pre><code>@main\nstruct CraftDSampleApp: App {\n    var body: some Scene {\n        WindowGroup {\n            //Or another View\n            let craftDBuilderManager = CraftDBuilderManager()\n                .add(builder: &lt;#T##any CraftDBuilder#&gt; like MyCraftDTextBuilder)\n            CraftDynamic(craftDBuilderManager: CraftDBuilderManager)\n        }\n    }\n}\n</code></pre>"},{"location":"how-to-use/view-system/","title":"View System","text":"<ul> <li>Add in a xml that you want to use</li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_height=\"match_parent\"\n    android:layout_width=\"match_parent\"&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/recycler\"\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"match_parent\"\n        app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre> <ul> <li>Add in your ViewModel the interface from the Dynamic</li> </ul> <pre><code>class YourViewModel(\n    val craft: CraftDView,\n    val repository: DynamicRepository \n) : ViewModel() {\n //Stuffs \n}\n</code></pre> <ul> <li>In your <code>Activity</code>/<code>Fragment</code> connect the Dynamic to the adapter in xml</li> </ul> <pre><code>  override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivityDynamicComponentBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        binding.recycler.adapter = vm.craft as CraftDViewAdapter\n        //--- Stuffs\n}\n</code></pre> <ul> <li>Create object Properties of according with your components for example:</li> </ul> <pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\ndata class TextProperties(\n    @JsonProperty(\"xxx\") val myProperties1: String,\n    @JsonProperty(\"xxx\") val myProperties2: String,\n)\n</code></pre> <p>View Renderds</p> <p>Create object ViewRenders of according with your components for example:</p> <pre><code> class MyComponentRender(override var onClickListener: CraftDViewListener?)\n : ViewRenderer&lt;MyComponentRender.MyHolder&gt;(\"Your Key\", \"Your Identifier\") {\n\n     inner class MyHolder(val anyView: AnyView) : RecyclerView.ViewHolder(anyView)\n\n     override fun bindView(model: SimpleProperties, holder: MyHolder, position: Int) {\n         val anyProperties = model.value.convertToVO&lt;AnyProperties&gt;()\n\n         holder.any.text = anyProperties.text\n         anyProperties.textColorHex?.let { textColorHex -&gt;\n             //Stuff\n         }\n         anyProperties.actionProperties?.let { actionProperties -&gt;\n             //Stuff\n         }\n     }\n\n     override fun createViewHolder(parent: ViewGroup): MyHolder {\n         return MyHolder(AnyView(parent.context))\n     }\n }\n</code></pre> <ul> <li>Configure your ViewModel to accept for example</li> </ul> <pre><code>class DynamicViewModel(\n    val craft: CraftD,\n    val repository: SampleCraftDRepository\n) : ViewModel() {\n\n    fun onResume() {\n        viewModelScope.launch {\n            repository.getDynamic()\n                .catch {\n                    it.printStackTrace()\n                }\n                .collect {\n                    setupDynamicRender(it)\n                    craft.setViewObjectDiff(it)\n                }\n        }\n    }\n\n    private fun setupDynamicRender(list: List&lt;SimpleProperties&gt;) {\n        craft.registerRenderers(\n            CraftDBuilderManager.getBuilderRenders(\n                simpleProperties = list,\n                customDynamicBuilderList = customListViewRender // Can you pass your custom list from ViewRender\n            ) { action -&gt;\n                listener.invoke(action)\n            })\n    }\n\n    private val listener = object : CraftDViewListener {\n        override fun invoke(actionProperties: ActionProperties) {\n            actionProperties.analytics?.let {\n               //Stuff\n            }\n            actionProperties.deeplink?.let {\n                //Stuff\n            }\n        }\n    }\n}\n</code></pre> <ul> <li>Enjoy and Have fun to create a json that you need</li> </ul> <p>Your component must have three properties</p> <p>Your json must to have at least two parameters key and value that are respective of your object for example:</p> <pre><code>{\n   \"data\": [\n        {\n            \"key\": \"MyDynamicView\",\n            \"value\": {\n                \"text\": \"Any\",\n                \"textColor\": \"Any\"\n            }\n        }\n    ]\n}\n</code></pre> <p>So now enjoy your component!!!</p>"},{"location":"notes/developers/","title":"For Developers","text":"<p>Note</p> <p>This library was created by the CodandoTV YouTube channel community.</p> <p>If you want to participate in the project just get in touch or fork the project on github.</p> <ul> <li> CraftD repository</li> </ul> <p>And if you are not yet subscribed to the channel, give us a hand and subscribe.</p> <ul> <li> CodandoTV</li> </ul>"},{"location":"notes/license/","title":"License","text":"<p>MIT License</p> <p>Copyright \u00a9 2024 CodandoTV and Rodrigo Vianna Calixto de Oliveira</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u201cSoftware\u201d), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"}]}